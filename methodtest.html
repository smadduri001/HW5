<!DOCTYPE html>
<html lang="EN">
    <head>
        <title>Method Test</title>
        <meta charset="utf-8">
        <style>
            #response {
                white-space: pre-wrap;
            }
        </style>
    </head>
    <body>

        <h1>Method Test</h1>
        <form id="method_form">
            <label for="id">Record ID:</label>
            <input type="number" id ="id" name="id"> <br>

            <label for="article_name">Article Name:</label>
            <input type="text" id ="article_name" name="article_name"> <br>

            <label for="article_body">Article Body:</label>
            <textarea type="text" id ="article_body" name="article_body"></textarea> <br>
        </form>

        <button id="postBtn">Post</button>
        <button id="getBtn">Get</button>
        <button id="putBtn">Put</button>
        <button id="deleteBtn">Delete</button>

        <hr>

        <output id="response"></output>

        <script>
            document.getElementById("postBtn").addEventListener("click", postFunc);
            document.getElementById("getBtn").addEventListener("click", getFunc);
            document.getElementById("putBtn").addEventListener("click", putFunc);
            document.getElementById("deleteBtn").addEventListener("click", deleteFunc);

            function displayResponse(data) {
                let outputBox = document.getElementById("response");
                outputBox.textContent = JSON.stringify(data, null, 2);
            }

            function getDate() {
                return new Date();
            }

            function postFunc() {
                const methodForm = document.querySelector("#method_form");
                const id = methodForm.elements["id"].value;
                const article_name = methodForm.elements["article_name"].value;
                const article_body = methodForm.elements["article_body"].value;
                const date = getDate();
                fetch("https://httpbin.org/post", {
                    method: 'POST',
                    headers: {
                        "Content-type": "application/json; charset=utf-8"
                    },
                    body: JSON.stringify({
                        id,
                        article_name,
                        article_body,
                        date
                    })
                })
                .then(response => response.json())
                .then(data => displayResponse(data))
                .catch(error => console.error(error));
            }

            function getFunc() {
                fetch("https://httpbin.org/get", {
                    method: 'GET'
                })
                .then(response => response.json())
                .then(data => displayResponse(data))
                .catch(error => console.error(error));
            }

            function putFunc() {
                const methodForm = document.querySelector("#method_form");
                const id = methodForm.elements["id"].value;
                const article_name = methodForm.elements["article_name"].value;
                const article_body = methodForm.elements["article_body"].value;
                const date = getDate();
                fetch("https://httpbin.org/put", {
                    method: 'PUT',
                    headers: {
                        "Content-type": "application/json; charset=utf-8"
                    },
                    body: JSON.stringify({
                        id,
                        article_name,
                        article_body,
                        date
                    })
                })
                .then(response => response.json())
                .then(data => displayResponse(data))
                .catch(error => console.error(error));
            }

            function deleteFunc() {
                fetch("https://httpbin.org/delete", {
                    method: 'DELETE'
                })
                .then(response => response.json())
                .then(data => displayResponse(data))
                .catch(error => console.error(error));
            }
        </script>
    </body>
</html>